# Compiler flags
DEFINES=-fPIC -shared -rdynamic
# Hydrax depends on the Ogre library
DEPS=OGRE
# Get all our C++ compiler flags
CXXFLAGS=$(shell PKG_CONFIG_PATH=$(PKG_CONFIG_PATH) pkg-config --cflags $(DEPS)) $(DEFINES)
# Get all our linker flags
LDFLAGS=$(shell PKG_CONFIG_PATH=$(PKG_CONFIG_PATH) pkg-config --libs $(DEPS)) -Wl,-rpath,$(RPATH)
# The name of the library
LIB=../libHydrax.so
# The compiler we are using
CXX=g++

# The object files for this library
OBJS = DecalsManager.o Enums.o Help.o Hydrax.o Image.o \
MaterialManager.o Mesh.o Prerequisites.o Structs.o TextureManager.o \
Modules/Module.o Modules/ProjectedGrid/ProjectedGrid.o  Modules/SimpleGrid/SimpleGrid.o \
Noise/Noise.o Noise/Perlin/Perlin.o

# Link and build the library
all: compile
	$(CXX) $(OBJS) -o $(LIB) $(LDFLAGS) $(CXXFLAGS)

# Compile the source files
compile: $(OBJS)

# Delete all the files generated by make all
clean:
	@rm -fv $(OBJS) $(LIB)